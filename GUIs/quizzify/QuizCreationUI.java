package quizzify;

import java.awt.event.ActionEvent;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;
import util.Question;
import util.Quiz;

/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
/**
 *
 * @author maya1
 */
public class QuizCreationUI extends javax.swing.JFrame {

    private List<Question> questions;
    private int currentQuestionIndex;
    private boolean valid;
    private String subject;
// <<<<<<< HEAD

    /**
     * @param subject the subject for the quiz
     * Creates new form QuizCreationUI
     */
    public QuizCreationUI(String subject) {
        this.subject = subject;
        initComponents();
        currentQuestionIndex = 0;
        questions = new ArrayList<>();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated
    // <editor-fold defaultstate="collapsed" desc="Generated
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        questionLabel = new javax.swing.JLabel();
        questionTextField = new javax.swing.JTextField();
        jLabelOption1 = new javax.swing.JLabel();
        jLabelOption2 = new javax.swing.JLabel();
        jLabelOption3 = new javax.swing.JLabel();
        jLabelOption4 = new javax.swing.JLabel();
        answerComboBox = new javax.swing.JComboBox<>();
        jLabelCorrectAnswer = new javax.swing.JLabel();
        answerTfThree = new javax.swing.JTextField();
        answerTfFour = new javax.swing.JTextField();
        answerTfTwo = new javax.swing.JTextField();
        answerTfOne = new javax.swing.JTextField();
        btnFinish = new javax.swing.JButton();
        btnNextQuestion = new javax.swing.JButton();
        lblSubject = new javax.swing.JLabel();
        lblSubjectName = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        questionLabel.setText("Question");

        jLabelOption1.setText("Option 1");

        jLabelOption2.setText("Option 2");

        jLabelOption3.setText("Option 3");

        jLabelOption4.setText("Option 4");

        String[] answerOptions = { "Option 1", "Option 2", "Option 3", "Option 4" };
        answerComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(answerOptions));

        jLabelCorrectAnswer.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelCorrectAnswer.setText("Correct Answer");

        btnFinish.setText("Finish");
        btnFinish.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnFinish.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFinishActionPerformed(evt);
            }
        });

        btnNextQuestion.setText("Next Question");
        btnNextQuestion.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnNextQuestion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextQuestionActionPerformed(evt);
            }
        });

        lblSubject.setText("Subject:");

        lblSubjectName.setText(this.subject);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabelCorrectAnswer, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 173, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnNextQuestion, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 179, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(btnFinish, javax.swing.GroupLayout.PREFERRED_SIZE, 179, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(answerComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(8, 8, 8))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(lblSubject)
                            .addComponent(questionLabel))
                        .addGap(36, 36, 36)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabelOption3, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabelOption1, javax.swing.GroupLayout.PREFERRED_SIZE, 139, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(4, 4, 4)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(answerTfOne)
                                    .addComponent(answerTfThree)))
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(jLabelOption4, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(answerTfFour, javax.swing.GroupLayout.PREFERRED_SIZE, 383, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addComponent(questionTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 514, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(jLabelOption2, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(answerTfTwo, javax.swing.GroupLayout.PREFERRED_SIZE, 383, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addComponent(lblSubjectName))
                                .addGap(0, 0, Short.MAX_VALUE)))))
                .addGap(57, 57, 57))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(quizPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(193, Short.MAX_VALUE))
        );
=======
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addGroup(layout.createSequentialGroup()
                                                .addGap(0, 0, Short.MAX_VALUE)
                                                .addGroup(layout
                                                        .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addComponent(jLabelCorrectAnswer,
                                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE, 173,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(btnNextQuestion,
                                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE, 179,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addGroup(layout
                                                        .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addGap(6, 6, 6)
                                                                .addComponent(btnFinish,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE, 179,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                                        .addComponent(answerComboBox,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE, 192,
                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                .addGap(8, 8, 8))
                                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout
                                                .createSequentialGroup()
                                                .addGroup(layout
                                                        .createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                        .addComponent(lblSubject)
                                                        .addComponent(questionLabel))
                                                .addGap(36, 36, 36)
                                                .addGroup(layout
                                                        .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addGroup(layout.createParallelGroup(
                                                                        javax.swing.GroupLayout.Alignment.LEADING)
                                                                        .addComponent(jLabelOption3,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                131,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                        .addComponent(jLabelOption1,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                139,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(4, 4, 4)
                                                                .addGroup(layout.createParallelGroup(
                                                                        javax.swing.GroupLayout.Alignment.LEADING)
                                                                        .addComponent(answerTfOne)
                                                                        .addComponent(answerTfThree)))
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addGroup(layout.createParallelGroup(
                                                                        javax.swing.GroupLayout.Alignment.LEADING)
                                                                        .addGroup(layout.createSequentialGroup()
                                                                                .addComponent(jLabelOption4,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                        131,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addPreferredGap(
                                                                                        javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                                                .addComponent(answerTfFour,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                        383,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                        .addComponent(questionTextField,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                514,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                        .addGroup(layout.createSequentialGroup()
                                                                                .addComponent(jLabelOption2,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                        131,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addPreferredGap(
                                                                                        javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                                                .addComponent(answerTfTwo,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                        383,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                        .addComponent(lblSubjectName))
                                                                .addGap(0, 0, Short.MAX_VALUE)))))
                                .addGap(57, 57, 57)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblSubject)
                                        .addComponent(lblSubjectName))
                                .addGap(16, 16, 16)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(questionTextField, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(questionLabel))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabelOption1, javax.swing.GroupLayout.PREFERRED_SIZE, 67,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(answerTfOne, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabelOption2, javax.swing.GroupLayout.PREFERRED_SIZE, 63,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(answerTfTwo, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabelOption3, javax.swing.GroupLayout.PREFERRED_SIZE, 69,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(answerTfThree, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabelOption4, javax.swing.GroupLayout.PREFERRED_SIZE, 90,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(answerTfFour, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addComponent(jLabelCorrectAnswer, javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(answerComboBox))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(btnFinish, javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(btnNextQuestion, javax.swing.GroupLayout.DEFAULT_SIZE, 75,
                                                Short.MAX_VALUE))
                                .addGap(12, 12, 12)));
>>>>>>> 0766ebedcd46412f35d1e696e117b1637251e3e7

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnFinishActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btnFinishActionPerformed
        finishQuizCreation();
    }// GEN-LAST:event_btnFinishActionPerformed

    private void btnNextQuestionActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btnNextQuestionActionPerformed
        addQuestion();
    }// GEN-LAST:event_btnNextQuestionActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        /* Set the Nimbus look and feel */
        // <editor-fold defaultstate="collapsed" desc=" Look and feel setting code
        // (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the default
         * look and feel.
         * For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(QuizCreationUI.class.getName()).log(java.util.logging.Level.SEVERE, null,
                    ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(QuizCreationUI.class.getName()).log(java.util.logging.Level.SEVERE, null,
                    ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(QuizCreationUI.class.getName()).log(java.util.logging.Level.SEVERE, null,
                    ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(QuizCreationUI.class.getName()).log(java.util.logging.Level.SEVERE, null,
                    ex);
        }
        // </editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> new QuizCreationUI("a subject").setVisible(true));
    }

    private void addQuestion() {
        String questionText = questionTextField.getText();
        String option4 = this.validate(answerTfOne.getText());
        String option3 = this.validate(answerTfTwo.getText());
        String option1 = this.validate(answerTfThree.getText());
        String option2 = this.validate(answerTfFour.getText());
        Logger.getLogger(QuizCreationUI.class.getName()).info("options maybe added");
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 1: {0}", option1);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 2: {0}", option2);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 3: {0}", option3);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 4: {0}", option4);

        if (!valid) {
            JOptionPane.showMessageDialog(this, "Please fill in all fields");
            return;
        }
        List<String> options = new ArrayList<>();
        options.add(option1);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 1 added successfully to the list");
        options.add(option2);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 2 added successfully to the list");
        options.add(option3);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 3 added successfully to the list");
        options.add(option4);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 4 added successfully to the list");

        Logger.getLogger(QuizCreationUI.class.getName()).info("All Options added maybe");
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "List: {0}", options);

        int correctAnswerIndex = answerComboBox.getSelectedIndex();
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "Correct answer index: {0}",
                correctAnswerIndex);

        Question question = new Question(questionText, options, correctAnswerIndex);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "Question created successfully: {0}",
                question);
        question.setCorrectAnswerIndex(correctAnswerIndex);

        questions.add(question);

        clearFields();
        currentQuestionIndex++;
        JOptionPane.showMessageDialog(this, "Question added!");
    }

    private void finishQuizCreation() {
        // Add logic to save the quiz with the created questions
        JOptionPane.showMessageDialog(this, "Quiz creation completed!");
        this.createQuiz();
        dispose();

        Quiz quiz = new Quiz();
        Question question1 = new Question("What is the capital of France?", List.of("London", "Berlin", "Paris"), 2);
        Question question2 = new Question("Which planet is known as the Red Planet?", List.of("Earth", "Mars", "Venus"),
                1);
        List<String> optionsForQuestion3 = new ArrayList<>();
        optionsForQuestion3.add("Jupiter");
        optionsForQuestion3.add("Saturn");
        optionsForQuestion3.add("Mars");
        optionsForQuestion3.add("Uranus");

        Question question3 = new Question("What is the largest planet in our solar system?", optionsForQuestion3, 0);
        quiz.addQuestion(question1);
        quiz.addQuestion(question2);
        quiz.addQuestion(question3);

        java.awt.EventQueue.invokeLater(() -> new QuizTakingUI(quiz).setVisible(true));
        java.awt.EventQueue.invokeLater(() -> new QuizCreationUI("English").setVisible(true));
    }

    private void addQuestion() {
        String questionText = questionTextField.getText();
        String option1 = this.validate(answerTfOne.getText());
        String option2 = this.validate(answerTfTwo.getText());
        String option3 = this.validate(answerTfThree.getText());
        String option4 = this.validate(answerTfFour.getText());
        Logger.getLogger(QuizCreationUI.class.getName()).info("options maybe added");
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 1: {0}", option1);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 2: {0}", option2);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 3: {0}", option3);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "option 4: {0}", option4);

        if (!valid) {
            JOptionPane.showMessageDialog(this, "Please fill in all fields");
            return;
        }
        List<String> options = new ArrayList<>();
        options.add(option1);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 1 added successfully to the list");
        options.add(option2);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 2 added successfully to the list");
        options.add(option3);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 3 added successfully to the list");
        options.add(option4);
        Logger.getLogger(QuizCreationUI.class.getName()).info("option 4 added successfully to the list");

        Logger.getLogger(QuizCreationUI.class.getName()).info("All Options added maybe");
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "List: {0}", options);

        int correctAnswerIndex = answerComboBox.getSelectedIndex();
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "Correct answer index: {0}",
                correctAnswerIndex);

        Question question = new Question(questionText, options, correctAnswerIndex);
        Logger.getLogger(QuizCreationUI.class.getName()).log(Level.INFO, "Question created successfully: {0}",
                question);

        questions.add(question);

        clearFields();
        currentQuestionIndex++;
        JOptionPane.showMessageDialog(this, "Question added!");
    }

    private void finishQuizCreation() {
        // Add logic to save the quiz with the created questions
        JOptionPane.showMessageDialog(this, "Quiz creation completed!");
        this.createQuiz();
        dispose();
    }

    private void clearFields() {
        questionTextField.setText("");
        answerTfThree.setText("");
        answerTfFour.setText("");
        answerTfTwo.setText("");
        answerTfOne.setText("");
        answerComboBox.setSelectedIndex(0);
    }

    private String validate(String args) {
        // check if empty
        valid = !(args.isEmpty() || args.length() == 0 || args.equals(""));
        return args;
    }

    private void createQuiz() {
        // Create a quiz
        Quiz quiz = new Quiz();
        quiz.setSubject(this.subject);
        Operation op = new Operation();
        quiz.saveQuiz(op.getCache("Teach"));
        for (int i = 0; i < questions.size(); i++) {
            Question question = questions.get(i);
            question.saveToDatabase(quiz.getQuizID());
            quiz.addQuestion(question);
        }
        // Create and start the QuizTakingGUI
        SwingUtilities.invokeLater(() -> new QuizDoingLol(quiz).setVisible(true));
>>>>>>> 0766ebedcd46412f35d1e696e117b1637251e3e7
    }

    public void startQuiz() {
        showNextQuestion();
        timer.start();
        this.setVisible(true);
    }

    private void showNextQuestion() {
        if (currentQuestionIndex < quiz.getNumQuestions()) {
            int selectedOptionIndex = getSelectedOptionIndex();
            int correctAnswerIndex = quiz.getQuestion(currentQuestionIndex).getCorrectAnswerIndex();

            currentQuestionIndex++;
            processAnswer(selectedOptionIndex, correctAnswerIndex);
            updateQuestion();
            nextButton.setEnabled(false);
            currentQuestionIndex++;
            timeRemaining = 60;
        } else {
            timer.stop();
            JOptionPane.showMessageDialog(this, "Quiz completed!");
            this.dispose();
        }
    }

    private void updateQuestion() {
        Question currentQuestion = quiz.getQuestion(currentQuestionIndex);
        questionTextArea.setText(currentQuestion.getPrompt());

        if (optionRadioButtons != null) {
            for (int i = 0; i < optionRadioButtons.length; i++) {
                optionGroup.remove(optionRadioButtons[i]);
                quizPanel.remove(optionRadioButtons[i]);
            }
        }

        optionRadioButtons = new JRadioButton[currentQuestion.getNumOptions()];

        for (int i = 0; i < currentQuestion.getNumOptions(); i++) {
            optionRadioButtons[i] = new JRadioButton(currentQuestion.getOption(i));
            optionGroup.add(optionRadioButtons[i]);
            quizPanel.add(optionRadioButtons[i]);
        }

        optionGroup.clearSelection();
        this.revalidate();
        Logger.getLogger(QuizTakingUI.class.getName()).log(Level.INFO, "Question Updated");
    }

    private void clearFields() {
        questionTextField.setText("");
        answerTfThree.setText("");
        answerTfFour.setText("");
        answerTfTwo.setText("");
        answerTfOne.setText("");
        answerComboBox.setSelectedIndex(0);
    }

    private String validate(String args) {
        // check if empty
        valid = !(args.isEmpty() || args.length() == 0 || args.equals(""));
        return args;
    }

    private void createQuiz() {
        // Create a quiz
        Quiz quiz = new Quiz();
        for (int i = 0; i < questions.size(); i++) {
            Question question = questions.get(i);
            quiz.addQuestion(question);
        }
        // Create and start the QuizTakingGUI
        SwingUtilities.invokeLater(() -> new QuizDoingLol(quiz).setVisible(true));
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> answerComboBox;
    private javax.swing.JTextField answerTfFour;
    private javax.swing.JTextField answerTfOne;
    private javax.swing.JTextField answerTfThree;
    private javax.swing.JTextField answerTfTwo;
    private javax.swing.JButton btnFinish;
    private javax.swing.JButton btnNextQuestion;
    private javax.swing.JLabel jLabelCorrectAnswer;
    private javax.swing.JLabel jLabelOption1;
    private javax.swing.JLabel jLabelOption2;
    private javax.swing.JLabel jLabelOption3;
    private javax.swing.JLabel jLabelOption4;
    private javax.swing.JLabel lblSubject;
    private javax.swing.JLabel lblSubjectName;
    private javax.swing.JLabel questionLabel;
    private javax.swing.JTextField questionTextField;
    // End of variables declaration//GEN-END:variables
}
